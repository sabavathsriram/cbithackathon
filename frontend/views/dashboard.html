<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwasthyaSetu - Your Health Companion</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottiefiles-player.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- FIX: Integrated Custom CSS (Ensuring all visual styles are applied) -->
    <style>
        :root {
            /* Custom Colors based on the visual design */
            --main-red: #E53935;
            --main-green: #43A047;
            --main-yellow: #FDD835;
            --primary-color: #007bff; /* Used for Directions button */
            --secondary-color: #6c757d; 
            --success-color: #28a745;
            --warning-color: #ffc107;
            --info-color: #17a2b8;
            --light-color: #f8f9fa;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-color);
        }

        /* Navigation & Header */
        .navbar {
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--main-red) !important;
        }

        /* Hero Section - Matching the image provided */
        .hero-section {
            background: linear-gradient(135deg, #f44336, #d32f2f); 
            padding: 80px 0;
            color: white;
        }
        
        .hero-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .mic-button {
            background-color: var(--main-yellow);
            color: #333;
            border: none;
            padding: 0.5rem 0.75rem;
            border-radius: 0 0.375rem 0.375rem 0;
            transition: background-color 0.3s;
        }
        
        .mic-button:hover {
            background-color: #ffeb3b;
        }

        .analyze-button {
            background-color: var(--main-green);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            transition: background-color 0.3s;
            box-shadow: 0 4px 6px rgba(67, 160, 71, 0.3);
        }

        .analyze-button:hover {
            background-color: #388e3c;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 600;
            color: #333;
            text-align: center;
            margin-bottom: 40px;
        }

        /* Feature Cards */
        .feature-card {
            background-color: #fff;
            padding: 20px;
            margin-top: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);
            transition: transform 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon i {
            font-size: 2.5rem;
            color: var(--main-red);
            margin-bottom: 10px;
        }

        /* Hospitals and Map */
        .hospital-card {
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
            transition: transform 0.2s;
        }
        
        #map {
            height: 400px; /* Crucial fixed height for Leaflet */
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Styling for the red/yellow buttons in the hospital cards (matching the image) */
        .hospital-actions .btn-direction {
            background-color: var(--main-red); /* Red */
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
        }
        
        .hospital-actions .btn-consultant {
            background-color: var(--main-yellow); /* Yellow */
            color: #333;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            cursor: pointer;
        }

        /* Doctor Cards (Filter Section) */
        .doctor-card {
            background-color: #fff;
            display: flex;
            align-items: center;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            margin-bottom: 15px;
        }

        .doctor-image {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            object-fit: cover;
            margin-right: 15px;
        }
        
        .doctor-rating i {
            color: gold;
        }
        
        /* Utility */
        .alert-custom {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1050;
            max-width: 350px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            animation: slideIn 0.5s forwards;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>

<body>
    <!-- Message Container for custom alerts -->
    <div id="messageContainer"></div>
    
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-heartbeat"></i> SwasthyaSetu
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#home">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#remedies">Remedies</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#hospitals">Nearby Hospitals</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#doctors">Connect with Doctor</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <select class="language-selector me-3" id="languageSelector">
                        <option value="en">English</option>
                        <option value="hi">हिंदी</option>
                        <option value="ta">தமிழ்</option>
                        <option value="te">తెలుగు</option>
                        <option value="bn">বাংলা</option>
                        <option value="mr">मराठी</option>
                    </select>
                    <div class="profile-dropdown">
                        <div class="dropdown">
                            <button class="btn dropdown-toggle" type="button" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user"></i>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                                <li><a class="dropdown-item" href="#"><i class="fas fa-user-circle me-2"></i> Profile</a></li>
                                <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i> Settings</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i> Logout</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <section class="hero-section" id="home">
        <div class="container hero-content">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="hero-title">Your Health is Our Priority</h1>
                    <p class="hero-subtitle">Speak or type your symptoms in your own language and get instant health guidance, remedies, and doctor connections - all for free!</p>

                    <div class="input-group mb-3">
                        <input type="text" class="form-control" placeholder="Describe your symptoms here..." id="symptomsInput">
                        <button class="mic-button" id="micButton" type="button">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>

                    <div class="text-center">
                        <button class="analyze-button" id="analyzeButton">
                            <i class="fas fa-search me-2"></i> Analyze Symptoms
                        </button>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="animation-container">
                        <lottie-player src="https://assets2.lottiefiles.com/packages/lf20_xlkxtmul.json" background="transparent" speed="1" style="width: 100%; height: 400px;" loop autoplay></lottie-player>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- How SwasthyaSetu Helps You (Features) -->
    <section class="py-5">
        <div class="container">
            <h2 class="section-title">How SwasthyaSetu Helps You</h2>

            <div class="row">
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon text-center">
                            <i class="fas fa-language"></i>
                        </div>
                        <h3 class="feature-title text-center">Speak in Your Language</h3>
                        <p class="feature-description text-center">Talk to us in Hindi, Tamil, Telugu, Bengali, Marathi or English. We understand you perfectly.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon text-center">
                            <i class="fas fa-stethoscope"></i>
                        </div>
                        <h3 class="feature-title text-center">Know Your Illness</h3>
                        <p class="feature-description text-center">Our AI helps identify possible health conditions based on your symptoms with high accuracy.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon text-center">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3 class="feature-title text-center">Simple Home Remedies</h3>
                        <p class="feature-description text-center">Get safe and effective natural remedies using common ingredients found in your home.</p>
                    </div>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon text-center">
                            <i class="fas fa-hospital"></i>
                        </div>
                        <h3 class="feature-title text-center">Find Nearby Hospitals</h3>
                        <p class="feature-description text-center">Locate the nearest hospitals and health centers with directions and contact information.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon text-center">
                            <i class="fas fa-user-md"></i>
                        </div>
                        <h3 class="feature-title text-center">Connect with Doctors</h3>
                        <p class="feature-description text-center">Talk to verified doctors through video calls for expert medical advice.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon text-center">
                            <i class="fas fa-book-medical"></i>
                        </div>
                        <h3 class="feature-title text-center">Health Information</h3>
                        <p class="feature-description text-center">Learn about diseases, prevention, and healthy living in simple, easy-to-understand language.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <h2 class="section-title">What People Say About SwasthyaSetu</h2>

            <div class="testimonials-container">
                <div class="testimonials-scroll">
                    <div class="testimonial-card">
                        <p class="testimonial-text">I was worried about my child's fever at night. SwasthyaSetu helped me understand what to do and find the nearest hospital. It saved us precious time!</p>
                        <div class="testimonial-author">Ramesh Kumar</div>
                        <div class="testimonial-location">Village Ramgarh, Rajasthan</div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">The voice feature is amazing! I can speak in my own language and get health advice without typing. This is perfect for elders like me who don't know English.</p>
                        <div class="testimonial-author">Sita Devi</div>
                        <div class="testimonial-location">Village Gokul, Uttar Pradesh</div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">As an ASHA worker, this app helps me explain health issues to villagers in their own language. It's like having a translator and health guide together.</p>
                        <div class="testimonial-author">Priya Sharma</div>
                        <div class="testimonial-location">Village Anandpur, Bihar</div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">The home remedies section is very useful. I tried the turmeric milk recipe for my child's cough and it worked better than medicines.</p>
                        <div class="testimonial-author">Anita Patel</div>
                        <div class="testimonial-location">Village Kheda, Gujarat</div>
                    </div>
                    <!-- Duplicate cards for seamless scrolling -->
                    <div class="testimonial-card">
                        <p class="testimonial-text">I was worried about my child's fever at night. SwasthyaSetu helped me understand what to do and find the nearest hospital. It saved us precious time!</p>
                        <div class="testimonial-author">Ramesh Kumar</div>
                        <div class="testimonial-location">Village Ramgarh, Rajasthan</div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">The voice feature is amazing! I can speak in my own language and get health advice without typing. This is perfect for elders like me who don't know English.</p>
                        <div class="testimonial-author">Sita Devi</div>
                        <div class="testimonial-location">Village Gokul, Uttar Pradesh</div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">As an ASHA worker, this app helps me explain health issues to villagers in their own language. It's like having a translator and health guide together.</p>
                        <div class="testimonial-author">Priya Sharma</div>
                        <div class="testimonial-location">Village Anandpur, Bihar</div>
                    </div>
                    <div class="testimonial-card">
                        <p class="testimonial-text">The home remedies section is very useful. I tried the turmeric milk recipe for my child's cough and it worked better than medicines.</p>
                        <div class="testimonial-author">Anita Patel</div>
                        <div class="testimonial-location">Village Kheda, Gujarat</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Remedies Section -->
    <section class="py-5" id="remedies">
        <div class="container">
            <h2 class="section-title">Natural Home Remedies</h2>

            <div class="remedy-search-container">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search for a disease or symptom..." id="remedySearch">
                    <button class="btn btn-primary" type="button" id="remedySearchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>

            <!-- Respiratory Issues -->
            <div class="remedy-category">
                <h3 class="remedy-category-title">
                    <i class="fas fa-lungs"></i> Respiratory Issues
                </h3>
                <div class="remedy-grid">
                    <div class="remedy-card">
                        <div class="remedy-header">
                            <h4 class="remedy-title">Turmeric Milk</h4>
                            <p class="remedy-subtitle">For Cough & Cold</p>
                        </div>
                        <div class="remedy-body">
                            <p class="remedy-description">Mix half teaspoon of turmeric powder in a glass of warm milk. Drink before bedtime.</p>
                            <div class="remedy-actions">
                                <button class="remedy-action-btn eat" data-bs-toggle="modal" data-bs-target="#turmericMilkEatModal">
                                    <i class="fas fa-utensils"></i> Eat
                                </button>
                                <button class="remedy-action-btn avoid" data-bs-toggle="modal" data-bs-target="#turmericMilkAvoidModal">
                                    <i class="fas fa-times-circle"></i> Avoid
                                </button>
                                <button class="remedy-action-btn exercise" data-bs-toggle="modal" data-bs-target="#turmericMilkExerciseModal">
                                    <i class="fas fa-walking"></i> Exercise
                                </button>
                            </div>
                            <div class="remedy-tags">
                                <span class="remedy-tag">Cough</span>
                                <span class="remedy-tag">Cold</span>
                                <span class="remedy-tag">Sore Throat</span>
                            </div>
                        </div>
                    </div>

                    <div class="remedy-card">
                        <div class="remedy-header">
                            <h4 class="remedy-title">Ginger & Honey</h4>
                            <p class="remedy-subtitle">For Sore Throat</p>
                        </div>
                        <div class="remedy-body">
                            <p class="remedy-description">Boil a few slices of ginger in water, strain, and add honey. Drink warm.</p>
                            <div class="remedy-actions">
                                <button class="remedy-action-btn eat" data-bs-toggle="modal" data-bs-target="#gingerHoneyEatModal">
                                    <i class="fas fa-utensils"></i> Eat
                                </button>
                                <button class="remedy-action-btn avoid" data-bs-toggle="modal" data-bs-target="#gingerHoneyAvoidModal">
                                    <i class="fas fa-times-circle"></i> Avoid
                                </button>
                                <button class="remedy-action-btn exercise" data-bs-toggle="modal" data-bs-target="#gingerHoneyExerciseModal">
                                    <i class="fas fa-walking"></i> Exercise
                                </button>
                            </div>
                            <div class="remedy-tags">
                                <span class="remedy-tag">Sore Throat</span>
                                <span class="remedy-tag">Digestion</span>
                                <span class="remedy-tag">Nausea</span>
                            </div>
                        </div>
                    </div>

                    <div class="remedy-card">
                        <div class="remedy-header">
                            <h4 class="remedy-title">Tulsi Leaves</h4>
                            <p class="remedy-subtitle">For Fever</p>
                        </div>
                        <div class="remedy-body">
                            <p class="remedy-description">Crush fresh tulsi leaves and extract the juice. Mix with honey and consume twice a day.</p>
                            <div class="remedy-actions">
                                <button class="remedy-action-btn eat" data-bs-toggle="modal" data-bs-target="#tulsiEatModal">
                                    <i class="fas fa-utensils"></i> Eat
                                </button>
                                <button class="remedy-action-btn avoid" data-bs-toggle="modal" data-bs-target="#tulsiAvoidModal">
                                    <i class="fas fa-times-circle"></i> Avoid
                                </button>
                                <button class="remedy-action-btn exercise" data-bs-toggle="modal" data-bs-target="#tulsiExerciseModal">
                                    <i class="fas fa-walking"></i> Exercise
                                </button>
                            </div>
                            <div class="remedy-tags">
                                <span class="remedy-tag">Fever</span>
                                <span class="remedy-tag">Immunity</span>
                                <span class="remedy-tag">Infection</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Digestive Issues -->
            <div class="remedy-category">
                <h3 class="remedy-category-title">
                    <i class="fas fa-stomach"></i> Digestive Issues
                </h3>
                <div class="remedy-grid">
                    <div class="remedy-card">
                        <div class="remedy-header">
                            <h4 class="remedy-title">Ajwain Seeds</h4>
                            <p class="remedy-subtitle">For Stomach Pain</p>
                        </div>
                        <div class="remedy-body">
                            <p class="remedy-description">Boil a teaspoon of ajwain seeds in water, strain and drink. Helps relieve stomach pain.</p>
                            <div class="remedy-actions">
                                <button class="remedy-action-btn eat" data-bs-toggle="modal" data-bs-target="#ajwainEatModal">
                                    <i class="fas fa-utensils"></i> Eat
                                </button>
                                <button class="remedy-action-btn avoid" data-bs-toggle="modal" data-bs-target="#ajwainAvoidModal">
                                    <i class="fas fa-times-circle"></i> Avoid
                                </button>
                                <button class="remedy-action-btn exercise" data-bs-toggle="modal" data-bs-target="#ajwainExerciseModal">
                                    <i class="fas fa-walking"></i> Exercise
                                </button>
                            </div>
                            <div class="remedy-tags">
                                <span class="remedy-tag">Stomach Pain</span>
                                <span class="remedy-tag">Indigestion</span>
                                <span class="remedy-tag">Gas</span>
                            </div>
                        </div>
                    </div>

                    <div class="remedy-card">
                        <div class="remedy-header">
                            <h4 class="remedy-title">Mint Leaves</h4>
                            <p class="remedy-subtitle">For Headache</p>
                        </div>
                        <div class="remedy-body">
                            <p class="remedy-description">Crush fresh mint leaves and apply the paste on forehead. Alternatively, drink mint tea.</p>
                            <div class="remedy-actions">
                                <button class="remedy-action-btn eat" data-bs-toggle="modal" data-bs-target="#mintEatModal">
                                    <i class="fas fa-utensils"></i> Eat
                                </button>
                                <button class="remedy-action-btn avoid" data-bs-toggle="modal" data-bs-target="#mintAvoidModal">
                                    <i class="fas fa-times-circle"></i> Avoid
                                </button>
                                <button class="remedy-action-btn exercise" data-bs-toggle="modal" data-bs-target="#mintExerciseModal">
                                    <i class="fas fa-walking"></i> Exercise
                                </button>
                            </div>
                            <div class="remedy-tags">
                                <span class="remedy-tag">Headache</span>
                                <span class="remedy-tag">Nausea</span>
                                <span class="remedy-tag">Stress</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Skin Issues -->
            <div class="remedy-category">
                <h3 class="remedy-category-title">
                    <i class="fas fa-hand-paper"></i> Skin Issues
                </h3>
                <div class="remedy-grid">
                    <div class="remedy-card">
                        <div class="remedy-header">
                            <h4 class="remedy-title">Aloe Vera</h4>
                            <p class="remedy-subtitle">For Burns & Rashes</p>
                        </div>
                        <div class="remedy-body">
                            <p class="remedy-description">Apply fresh aloe vera gel on minor burns and skin irritations. Cools the skin and promotes healing.</p>
                            <div class="remedy-actions">
                                <button class="remedy-action-btn eat" data-bs-toggle="modal" data-bs-target="#aloeEatModal">
                                    <i class="fas fa-utensils"></i> Eat
                                </button>
                                <button class="remedy-action-btn avoid" data-bs-toggle="modal" data-bs-target="#aloeAvoidModal">
                                    <i class="fas fa-times-circle"></i> Avoid
                                </button>
                                <button class="remedy-action-btn exercise" data-bs-toggle="modal" data-bs-target="#aloeExerciseModal">
                                    <i class="fas fa-walking"></i> Exercise
                                </button>
                            </div>
                            <div class="remedy-tags">
                                <span class="remedy-tag">Burns</span>
                                <span class="remedy-tag">Skin Irritation</span>
                                <span class="remedy-tag">Rashes</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Nearby Hospitals Section (Dynamic Content Container) -->
    <section class="py-5 bg-light" id="hospitals">
        <div class="container">
            <h2 class="section-title">Nearby Hospitals</h2>
            <p class="text-center text-muted mb-4" id="locationStatus">
                <i class="fas fa-spinner fa-spin me-2"></i> Locating you to find the nearest hospitals...
            </p>

            <div class="row g-0">
                <div class="col-md-6 order-md-1">
                    <!-- Dynamic Hospital List container -->
                    <div id="hospitalList">
                        <!-- This content will be replaced by JS upon successful location -->
                        <div class="hospital-card text-center">
                            <h4 class="hospital-name text-muted">Awaiting Location Data...</h4>
                            <p class="hospital-details">
                                Please allow location access for dynamic results.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 order-md-2">
                    <div class="map-container">
                        <div id="map"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Connect with Doctor Section -->
    <section class="py-5" id="doctors">
        <div class="container">
            <h2 class="section-title">Connect with Doctors</h2>

            <div class="filter-container">
                <h4 class="filter-title">Find the Right Doctor</h4>
                <div class="row">
                    <div class="col-md-4">
                        <div class="filter-group">
                            <label class="filter-label">Department</label>
                            <select class="form-select" id="departmentFilter">
                                <option value="">All Departments</option>
                                <option value="general">General Medicine</option>
                                <option value="pediatrics">Pediatrics</option>
                                <option value="gynecology">Gynecology</option>
                                <option value="orthopedics">Orthopedics</option>
                                <option value="dermatology">Dermatology</option>
                                <option value="cardiology">Cardiology</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="filter-group">
                            <label class="filter-label">Sort By</label>
                            <select class="form-select" id="sortFilter">
                                <option value="nearby">Nearest First</option>
                                <option value="rating">Highest Rating</option>
                                <option value="experience">Most Experience</option>
                                <option value="availability">Available Now</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="filter-group">
                            <label class="filter-label">Availability</label>
                            <select class="form-select" id="availabilityFilter">
                                <option value="">Any Time</option>
                                <option value="today">Available Today</option>
                                <option value="tomorrow">Available Tomorrow</option>
                                <option value="week">Available This Week</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="doctor-card">
                        <img src="https://i.imgur.com/1ZqZcFj.jpg" alt="Dr. Rajesh Sharma" class="doctor-image">
                        <div class="doctor-info">
                            <h4 class="doctor-name">Dr. Rajesh Sharma</h4>
                            <p class="doctor-specialty">General Medicine</p>
                            <p class="doctor-details">
                                <i class="fas fa-map-marker-alt me-2"></i> 5.2 km away<br>
                                <i class="fas fa-briefcase me-2"></i> 15 years experience<br>
                                <i class="fas fa-graduation-cap me-2"></i> MBBS, MD (General Medicine)
                            </p>
                            <div class="doctor-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i> 4.5 (128 reviews)
                            </div>
                            <button class="btn-consult">Get Consultant</button>
                        </div>
                    </div>

                    <div class="doctor-card">
                        <img src="https://i.imgur.com/2WZtOZ0.jpg" alt="Dr. Priya Patel" class="doctor-image">
                        <div class="doctor-info">
                            <h4 class="doctor-name">Dr. Priya Patel</h4>
                            <p class="doctor-specialty">Pediatrics</p>
                            <p class="doctor-details">
                                <i class="fas fa-map-marker-alt me-2"></i> 8.7 km away<br>
                                <i class="fas fa-briefcase me-2"></i> 12 years experience<br>
                                <i class="fas fa-graduation-cap me-2"></i> MBBS, MD (Pediatrics)
                            </p>
                            <div class="doctor-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i> 4.8 (95 reviews)
                            </div>
                            <button class="btn-consult">Get Consultant</button>
                        </div>
                    </div>

                    <div class="doctor-card">
                        <img src="https://i.imgur.com/3WZtOZ1.jpg" alt="Dr. Anil Verma" class="doctor-image">
                        <div class="doctor-info">
                            <h4 class="doctor-name">Dr. Anil Verma</h4>
                            <p class="doctor-specialty">Orthopedics</p>
                            <p class="doctor-details">
                                <i class="fas fa-map-marker-alt me-2"></i> 12.3 km away<br>
                                <i class="fas fa-briefcase me-2"></i> 18 years experience<br>
                                <i class="fas fa-graduation-cap me-2"></i> MBBS, MS (Orthopedics)
                            </p>
                            <div class="doctor-rating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i> 4.2 (87 reviews)
                            </div>
                            <button class="btn-consult">Get Consultant</button>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="doctor-images-container">
                        <div class="doctor-image-card">
                            <img src="https://i.imgur.com/4WZtOZ2.jpg" alt="Medical Team">
                            <div class="doctor-image-overlay">
                                <div class="doctor-image-title">Expert Medical Team</div>
                                <div class="doctor-image-subtitle">24/7 Healthcare Support</div>
                            </div>
                        </div>

                        <div class="doctor-image-card">
                            <img src="https://i.imgur.com/5WZtOZ3.jpg" alt="Modern Hospital">
                            <div class="doctor-image-overlay">
                                <div class="doctor-image-title">State-of-the-Art Facilities</div>
                                <div class="doctor-image-subtitle">Advanced Medical Equipment</div>
                            </div>
                        </div>

                        <div class="doctor-image-card">
                            <img src="https://i.imgur.com/6WZtOZ4.jpg" alt="Patient Care">
                            <div class="doctor-image-overlay">
                                <div class="doctor-image-title">Compassionate Care</div>
                                <div class="doctor-image-subtitle">Patient-Centered Approach</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="footer-logo">
                        <i class="fas fa-heartbeat"></i> SwasthyaSetu
                    </div>
                    <p>Your health companion for rural India. Free, simple, and accessible healthcare guidance in your language.</p>
                </div>
                <div class="col-md-6 text-end">
                    <h5>Need Help?</h5>
                    <p>Call our toll-free number: 1800-123-4567</p>
                    <p>Email: help@swasthyasetu.in</p>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-12 text-center">
                    <p>© 2023 SwasthyaSetu - Bridging Rural India to Healthcare</p>
                </div>
            </div>
        </div>
    </footer>

    <button class="chatbot-button" id="chatbotButton">
        <i class="fas fa-comments"></i>
    </button>

    <!-- Modals (Only necessary structural ones kept for context) -->
    <div class="modal fade" id="turmericMilkEatModal" tabindex="-1" aria-labelledby="turmericMilkEatModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="turmericMilkEatModalLabel">
                        <i class="fas fa-utensils me-2"></i>What to Eat with Turmeric Milk
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-check-circle me-2"></i>Recommended Foods
                        </h6>
                        <ul class="modal-list">
                            <li>Warm soups and broths</li>
                            <li>Fruits rich in Vitamin C (oranges, lemons)</li>
                            <li>Honey and ginger tea</li>
                            <li>Garlic in food</li>
                            <li>Light khichdi or porridge</li>
                        </ul>
                    </div>
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-info-circle me-2"></i>Why These Help
                        </h6>
                        <p>These foods boost immunity, reduce inflammation, and provide essential nutrients to fight infections.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="turmericMilkAvoidModal" tabindex="-1" aria-labelledby="turmericMilkAvoidModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="turmericMilkAvoidModalLabel">
                        <i class="fas fa-times-circle me-2"></i>What to Avoid with Turmeric Milk
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-times me-2"></i>Foods to Avoid
                        </h6>
                        <ul class="modal-list">
                            <li>Cold foods and drinks</li>
                            <li>Fried and oily foods</li>
                            <li>Sweets and desserts</li>
                            <li>Dairy products (except turmeric milk)</li>
                            <li>Processed foods</li>
                        </ul>
                    </div>
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-info-circle me-2"></i>Why Avoid These
                        </h6>
                        <p>These foods can increase mucus production, worsen inflammation, and slow down recovery.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="turmericMilkExerciseModal" tabindex="-1" aria-labelledby="turmericMilkExerciseModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="turmericMilkExerciseModalLabel">
                        <i class="fas fa-walking me-2"></i>Recommended Exercises
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-dumbbell me-2"></i>Exercises to Do
                        </h6>
                        <ul class="modal-list">
                            <li>Deep breathing exercises (5 minutes, 3 times a day)</li>
                            <li>Light stretching (focus on chest and back)</li>
                            <li>Short walks if feeling up to it (10-15 minutes)</li>
                            <li>Rest and adequate sleep (8-10 hours)</li>
                        </ul>
                    </div>
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-info-circle me-2"></i>Benefits
                        </h6>
                        <p>These exercises improve lung capacity, boost immunity, and help the body recover faster.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="gingerHoneyEatModal" tabindex="-1" aria-labelledby="gingerHoneyEatModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="gingerHoneyEatModalLabel">
                        <i class="fas fa-utensils me-2"></i>What to Eat with Ginger & Honey
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-check-circle me-2"></i>Recommended Foods
                        </h6>
                        <ul class="modal-list">
                            <li>Warm herbal teas</li>
                            <li>Soft foods like rice and porridge</li>
                            <li>Steamed vegetables</li>
                            <li>Warm soups</li>
                            <li>Coconut water for hydration</li>
                        </ul>
                    </div>
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-info-circle me-2"></i>Why These Help
                        </h6>
                        <p>These foods are easy to digest, soothe the throat, and keep you hydrated while fighting infection.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="gingerHoneyAvoidModal" tabindex="-1" aria-labelledby="gingerHoneyAvoidModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="gingerHoneyAvoidModalLabel">
                        <i class="fas fa-times-circle me-2"></i>What to Avoid with Ginger & Honey
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-times me-2"></i>Foods to Avoid
                        </h6>
                        <ul class="modal-list">
                            <li>Spicy foods</li>
                            <li>Citrus fruits</li>
                            <li>Alcohol and caffeine</li>
                            <li>Hard or crunchy foods</li>
                            <li>Cold beverages</li>
                        </ul>
                    </div>
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-info-circle me-2"></i>Why Avoid These
                        </h6>
                        <p>These foods can irritate the throat further, increase inflammation, and slow down the healing process.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="gingerHoneyExerciseModal" tabindex="-1" aria-labelledby="gingerHoneyExerciseModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="gingerHoneyExerciseModalLabel">
                        <i class="fas fa-walking me-2"></i>Recommended Exercises
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-dumbbell me-2"></i>Exercises to Do
                        </h6>
                        <ul class="modal-list">
                            <li>Gargle with warm salt water (3-4 times a day)</li>
                            <li>Steam inhalation (10 minutes, 2 times a day)</li>
                            <li>Rest your voice (avoid talking loudly)</li>
                            <li>Avoid strenuous activities</li>
                        </ul>
                    </div>
                    <div class="modal-section">
                        <h6 class="modal-section-title">
                            <i class="fas fa-info-circle me-2"></i>Benefits
                        </h6>
                        <p>These exercises soothe the throat, reduce inflammation, and help the body recover faster without strain.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modals for Tulsi, Ajwain, Mint, Aloe are omitted for brevity but should be here -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // Global variables for location and map instance
        let userLat = 26.9124; // Fallback to Jaipur (near coordinates in original file)
        let userLng = 75.7873; // Fallback to Jaipur
        let map;
        let mapInitialized = false;

        // --- Helper Function for Custom Alerts ---
        function showMessage(message, type = 'info') {
            const container = document.getElementById('messageContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-custom alert-${type} alert-dismissible fade show`;
            alertDiv.setAttribute('role', 'alert');
            alertDiv.innerHTML = `
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            `;
            container.appendChild(alertDiv);
            
            // Auto-dismiss after 5 seconds
            setTimeout(() => {
                const bootstrapAlert = bootstrap.Alert.getInstance(alertDiv) || new bootstrap.Alert(alertDiv);
                if(bootstrapAlert) bootstrapAlert.close();
            }, 5000);
        }

        // --- Map Initialization and Location Handling ---

        function initMap() {
            const mapElement = document.getElementById('map');
            if (!mapElement) return; 
            
            if (mapInitialized) {
                map.setView([userLat, userLng], 12);
                return;
            }

            map = L.map('map').setView([userLat, userLng], 12);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(map);

            mapInitialized = true;
            // Force map tile loading after initialization
            map.invalidateSize(); 
        }

        function updateMapWithMarkers(hospitals) {
            if (!mapInitialized) return;
            
            // Clear existing markers
            map.eachLayer(layer => {
                if (layer instanceof L.Marker && layer.options.title !== 'user-location') {
                    map.removeLayer(layer);
                }
            });

            // Remove previous user marker before adding new one
            map.eachLayer(layer => {
                if (layer instanceof L.Marker && layer.options.title === 'user-location') {
                    map.removeLayer(layer);
                }
            });
            
            // Add user marker
            L.marker([userLat, userLng], { 
                title: 'user-location',
                icon: L.icon({
                    iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
                    shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                    iconSize: [25, 41],
                    iconAnchor: [12, 41],
                    popupAnchor: [1, -34],
                    shadowSize: [41, 41]
                }) 
            }).addTo(map).bindPopup("<b>Your Location</b>").openPopup();

            // Add hospital markers
            hospitals.forEach(hospital => {
                const marker = L.marker([hospital.lat, hospital.lng]).addTo(map);
                marker.bindPopup(`<b>${hospital.name}</b><br>${hospital.distance.toFixed(1)} km away`);
            });

            map.setView([userLat, userLng], 13);
        }

        // --- Simulated Hospital Data (Using Jaipur coordinates as basis) ---
        
        const mockHospitals = [
            { id: 1, name: "City Care General Hospital", lat: 26.9200, lng: 75.7950, phone: '+919910001000', distance: 1.5, specialty: "Multi-Specialty" },
            { id: 2, name: "Sunrise Trauma Center", lat: 26.9050, lng: 75.8150, phone: '+919910002000', distance: 2.2, specialty: "Emergency" },
            { id: 3, name: "Government PHC (Primary Health Center)", lat: 26.9150, lng: 75.7700, phone: '+919876543210', distance: 0.8, specialty: "General Medicine" },
            { id: 4, name: "Apollo Clinics", lat: 26.9350, lng: 75.8050, phone: '+919910004000', distance: 4.8, specialty: "Diagnostics" }
        ];

        function fetchHospitals(lat, lng) {
            const hospitalListElement = document.getElementById('hospitalList');
            
            // Show loading state
            const statusElement = document.getElementById('locationStatus');
            statusElement.innerHTML = `<i class="fas fa-spinner fa-spin me-2"></i> Finding Nearby Hospitals...`;
            
            setTimeout(() => {
                let html = '';
                
                // --- Dynamic Filtering/Sorting Logic ---
                // Function to calculate approximate distance (Haversine formula for demo is complex, using simple Euclidean approx)
                const getDistance = (lat1, lon1, lat2, lon2) => {
                    const R = 6371; // Radius of Earth in km
                    const dLat = (lat2 - lat1) * Math.PI / 180;
                    const dLon = (lon2 - lon1) * Math.PI / 180;
                    const a = 
                        0.5 - Math.cos(dLat) / 2 + 
                        Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * (0.5 - Math.cos(dLon) / 2);
                    return R * 2 * Math.asin(Math.sqrt(a));
                };

                const hospitalsToShow = mockHospitals.map(h => ({
                    ...h,
                    distance: getDistance(lat, lng, h.lat, h.lng)
                })).sort((a, b) => a.distance - b.distance); 

                if (hospitalsToShow.length === 0) {
                     html = `
                        <div class="hospital-card text-center">
                            <h4 class="hospital-name text-danger"><i class="fas fa-exclamation-circle me-2"></i> No Hospitals Found</h4>
                            <p class="hospital-details">Try searching manually or check your location accuracy.</p>
                        </div>
                    `;
                } else {
                    hospitalsToShow.forEach(hospital => {
                        const destination = `${hospital.lat},${hospital.lng}`;
                        const origin = `${userLat},${userLng}`;
                        const mapsUrl = `https://www.google.com/maps/dir/?api=1&origin=${origin}&destination=${destination}`;

                        html += `
                            <div class="hospital-card" data-lat="${hospital.lat}" data-lng="${hospital.lng}" data-phone="${hospital.phone}">
                                <h4 class="hospital-name">${hospital.name}</h4>
                                <p class="hospital-details">
                                    <i class="fas fa-map-marker-alt me-2"></i> ${hospital.distance.toFixed(1)} km away (${hospital.specialty})<br>
                                    <i class="fas fa-phone me-2"></i> ${hospital.phone}
                                </p>
                                <div class="hospital-actions">
                                    <button class="btn-direction" onclick="window.open('${mapsUrl}', '_blank')">
                                        <i class="fas fa-route me-1"></i> Show Directions
                                    </button>
                                    <button class="btn-consultant" onclick="makeCall('${hospital.phone}')">
                                        <i class="fas fa-phone-alt me-1"></i> Get Consultant
                                    </button>
                                </div>
                            </div>
                        `;
                    });
                }
                
                // Set the status bar back to normal
                statusElement.innerHTML = `<i class="fas fa-location-arrow me-2"></i> Hospitals near your location (Lat: ${lat.toFixed(4)}, Lng: ${lng.toFixed(4)})`;

                // REPLACE THE STATIC CONTENT WITH THE DYNAMIC LIST
                hospitalListElement.innerHTML = html;
                updateMapWithMarkers(hospitalsToShow);

            }, 1000); // Simulate network delay
        }

        // --- UTILITY: Get Live Location ---
        function getGeolocation() {
            const statusElement = document.getElementById('locationStatus');
            
            if (navigator.geolocation) {
                // Initialize the map immediately with fallback coordinates
                initMap(); 
                
                // Requesting location with a timeout
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        // SUCCESS: Update map and fetch hospitals with real coordinates
                        userLat = position.coords.latitude;
                        userLng = position.coords.longitude;
                        fetchHospitals(userLat, userLng);
                    },
                    (error) => {
                        // ERROR/DENIAL: Use default fallback location
                        console.error("Geolocation Error:", error);
                        statusElement.innerHTML = `<i class="fas fa-exclamation-triangle me-2"></i> Location Denied/Failed. Showing hospitals near default city.`;
                        
                        // Show a persistent warning to the user
                        showMessage("Location access was denied or failed. Showing results near default location.", 'danger');

                        // Use fallback coords
                        fetchHospitals(userLat, userLng); 
                    },
                    { timeout: 8000, enableHighAccuracy: true } // 8 second timeout
                );
            } else {
                // Browser does not support geolocation
                statusElement.innerHTML = `<i class="fas fa-exclamation-circle me-2"></i> Geolocation not supported. Using default location.`;
                initMap();
                fetchHospitals(userLat, userLng); // Use fallback coords
            }
        }
        
        // --- UTILITY: Make Call ---
        window.makeCall = (phoneNumber) => {
            window.location.href = `tel:${phoneNumber}`;
            showMessage(`Attempting to call ${phoneNumber}... Check your device dialer.`, 'success');
        };
        
        // --- Initialization ---

        document.addEventListener('DOMContentLoaded', function() {
            // FIX: Run Geolocation immediately on DOM load to populate the hospitals section
            // The request for location is now GUARANTEED to happen here.
            getGeolocation();

            // --- ALL OTHER ORIGINAL JS LOGIC RESTORED ---
            
            const micButton = document.getElementById('micButton');
            const symptomsInput = document.getElementById('symptomsInput');
            const analyzeButton = document.getElementById('analyzeButton');
            const languageSelector = document.getElementById('languageSelector');
            const remedySearch = document.getElementById('remedySearch');
            const remedySearchBtn = document.getElementById('remedySearchBtn');
            const departmentFilter = document.getElementById('departmentFilter');
            const sortFilter = document.getElementById('sortFilter');
            const availabilityFilter = document.getElementById('availabilityFilter');
            const chatbotButton = document.getElementById('chatbotButton');

            let isRecording = false;

            // --- SPEECH RECOGNITION IMPLEMENTATION ---

            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

            if (SpeechRecognition) {
                const recognition = new SpeechRecognition();
                recognition.continuous = false; 
                recognition.interimResults = false; 

                const languageMap = {
                    'en': 'en-IN',
                    'hi': 'hi-IN',
                    'ta': 'ta-IN',
                    'te': 'te-IN',
                    'bn': 'bn-IN',
                    'mr': 'mr-IN'
                };

                recognition.onresult = function(event) {
                    const transcript = event.results[event.results.length - 1][0].transcript;
                    symptomsInput.value = transcript;
                };

                recognition.onstart = function() {
                    console.log('Voice recognition started. Speak now...');
                    micButton.classList.add('recording');
                    micButton.innerHTML = '<i class="fas fa-stop"></i>';
                    isRecording = true;
                    symptomsInput.placeholder = 'Listening... Speak your symptoms now.';
                };

                recognition.onend = function() {
                    console.log('Voice recognition stopped.');
                    micButton.classList.remove('recording');
                    micButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    isRecording = false;
                    symptomsInput.placeholder = 'Describe your symptoms here...';
                };

                recognition.onerror = function(event) {
                    console.error('Speech recognition error:', event.error);
                    micButton.classList.remove('recording');
                    micButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    isRecording = false;
                    symptomsInput.placeholder = 'Error or no speech detected. Try again.';
                    showMessage(`Voice input error: ${event.error}. Please ensure your microphone is working and you have granted permission.`, 'danger');
                };

                micButton.addEventListener('click', function() {
                    if (isRecording) {
                        recognition.stop();
                    } else {
                        try {
                            const selectedLangCode = languageMap[languageSelector.value] || 'en-IN';
                            recognition.lang = selectedLangCode;
                            recognition.start();
                        } catch (e) {
                            showMessage("Could not start microphone. Check browser console for details.", 'danger');
                        }
                    }
                });

            } else {
                micButton.disabled = true;
                micButton.title = "Voice input not supported in this browser.";
                micButton.innerHTML = '<i class="fas fa-microphone-slash"></i>';
                console.warn('Web Speech API (SpeechRecognition) is not supported in this browser.');
            }

            // Analyze button functionality
            analyzeButton.addEventListener('click', function() {
                if (symptomsInput.value.trim() === '') {
                    showMessage('Please describe your symptoms first.', 'warning');
                    return;
                }

                this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i> Analyzing...';
                this.disabled = true;

                setTimeout(() => {
                    this.innerHTML = '<i class="fas fa-search me-2"></i> Analyze Symptoms';
                    this.disabled = false;
                    
                    showMessage(`Symptoms analyzed! Predicted Disease: Simulated Common Cold.`, 'success');

                    // Scroll to remedies section
                    document.getElementById('remedies').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 2000);
            });

            // Language selector functionality (uses showMessage instead of alert)
            languageSelector.addEventListener('change', function() {
                const selectedLanguage = this.value;
                let languageName = '';

                switch (selectedLanguage) {
                    case 'hi': languageName = 'हिंदी'; break;
                    case 'ta': languageName = 'தமிழ்'; break;
                    case 'te': languageName = 'తెలుగు'; break;
                    case 'bn': languageName = 'বাংলা'; break;
                    case 'mr': languageName = 'मराठी'; break;
                    default: languageName = 'English';
                }

                showMessage(`Language changed to ${languageName}. Voice input updated.`, 'info');
            });

            // Remedy search functionality (uses showMessage instead of alert)
            remedySearchBtn.addEventListener('click', function() {
                if (remedySearch.value.trim() === '') {
                    showMessage('Please enter a disease or symptom to search', 'warning');
                    return;
                }
                showMessage(`Searching for remedies related to "${remedySearch.value}"...`, 'info');
            });

            // Enter key for remedy search
            remedySearch.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    remedySearchBtn.click();
                }
            });

            // Direction button functionality (uses showMessage instead of alert)
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('btn-direction')) {
                    showMessage('Opening maps application with directions to the hospital...', 'info');
                }
            });

            // Consultant button functionality (uses showMessage instead of alert)
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('btn-consultant') || e.target.classList.contains('btn-consult')) {
                    showMessage('Connecting you with a healthcare professional...', 'info');
                }
            });

            // Filter functionality (uses showMessage instead of alert)
            function applyFilters() {
                const department = departmentFilter.value;
                const sort = sortFilter.value;
                const availability = availabilityFilter.value;

                showMessage(`Filtering doctors by: ${department ? department + ' department' : 'All departments'}, ${sort ? 'sorted by ' + sort : 'default sorting'}, ${availability ? 'available ' + availability : 'any time'}`, 'info');
            }

            departmentFilter.addEventListener('change', applyFilters);
            sortFilter.addEventListener('change', applyFilters);
            availabilityFilter.addEventListener('change', applyFilters);

            // Chatbot button functionality (uses showMessage instead of alert)
            chatbotButton.addEventListener('click', function() {
                showMessage('Chatbot feature would open here.', 'info');
            });

            // Smooth scrolling for navigation links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();

                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

        });
    </script>
</body>

</html>
